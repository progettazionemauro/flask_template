<!DOCTYPE html>
<html>
<head>
    <title>Object Details</title>
    <script>
        // Function to close the preview
        function closePreview() {
            // Clear the existing preview
            previewContainer.innerHTML = '';

            // Show the "Show Preview" button and hide the "Close Preview" button
            showPreviewBtn.style.display = 'inline-block';
            closePreviewBtn.style.display = 'none';
        }
    </script>
</head>
<body>
    <h1>Object Details</h1>
    <p><strong>ID:</strong> {{ object_id }}</p>
    <p><strong>Name:</strong> {{ object_name }}</p>
    <p><strong>File Name:</strong> {{ object_filename }}</p>
    <p><strong>Date of Review:</strong> {{ object_date_of_review }}</p>

    <!-- Add the "Close Preview" button (hidden by default) -->
    <button id="close-preview-btn" onclick="closePreview()" style="display: none;">Close Preview</button>

    <!-- Add any additional content or design you want to show for the object details -->

    <!-- Add the "Back to Object List" button -->
    <a href="/">Back to Object List</a>

    <!-- Add the file preview container -->
    <div id="preview-container"></div>

    <!-- Add the "Show Preview" button -->
    <button id="show-preview-btn" onclick="showPreview()">Show Preview</button>

    <!-- Add any necessary JavaScript here if needed -->
    <script>
        var previewContainer = document.getElementById('preview-container');
        var showPreviewBtn = document.getElementById('show-preview-btn');
        var closePreviewBtn = document.getElementById('close-preview-btn');

        // Function to display image or PDF preview
        function showPreview() {
            var fileExtension = "{{ object_filename.split('.').pop() }}".toLowerCase();

            // Clear the existing preview
            previewContainer.innerHTML = '';

            // Check if the file is an image (supported image types)
            if (['jpg', 'jpeg', 'png', 'gif'].includes(fileExtension)) {
                // Construct the image tag with the correct URL
                var imgTag = '<img src="/uploads/' + "{{ object_filename | safe }}" + '" alt="Preview">';
                // Display the image preview
                previewContainer.innerHTML = imgTag;
            } else if (fileExtension === 'pdf') {
                // Construct the iframe tag with the correct URL
                var pdfTag = '<iframe src="/uploads/' + "{{ object_filename | safe }}" + '" width="600" height="400" type="application/pdf"></iframe>';
                // Display the PDF preview
                previewContainer.innerHTML = pdfTag;
            } else {
                // File type not supported, show an error message
                previewContainer.innerHTML = 'Preview not available for this file type.';
            }

            // Show the "Close Preview" button and hide the "Show Preview" button
            showPreviewBtn.style.display = 'none';
            closePreviewBtn.style.display = 'inline-block';
        }
    </script>
</body>
</html>
